/* | -----------------------------------------------------------------------------------
 * | - import -
 * | -----------------------------------------------------------------------------------
 */
import * as env from './env';
import Redis from './redis';
import server from './server';
import Socket from './socket';

/* | -----------------------------------------------------------------------------------
 * | - Initialization -
 * | -----------------------------------------------------------------------------------
 */
const socket = new Socket(server);
socket.init();

const redis = new Redis(socket);
redis.init();

/* | -----------------------------------------------------------------------------------
 * | - Run the server -
 * | -----------------------------------------------------------------------------------
 */
server.listen(env.port, env.hostName, () => {
  console.log(`Listening on ${env.hostName || '*'}:${env.port}`);
});
