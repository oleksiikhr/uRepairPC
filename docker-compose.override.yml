version: '3'

services:
  maildev:
    image: djfarrelly/maildev
    container_name: u_maildev
    restart: always
    ports:
      - ${MAIL_PORT}:25
    labels:
      - traefik.http.routers.maildev.rule=Host(`maildev.localhost`)
      - traefik.http.services.maildev.loadbalancer.server.port=80

  web:
    build: ./.docker/web
    container_name: u_web
    restart: always
    volumes:
      - ./web:/usr/app
    labels:
      - traefik.http.routers.web.rule=Host(`${DOCKER_DOMAIN}`)
      - traefik.http.routers.web.entrypoints=web
