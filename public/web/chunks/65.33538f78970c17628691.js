(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{301:function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r=["Home","Requests","Users","Settings","Roles","SettingsCore"];e.a=[].concat(r,["EquipmentManufacturers","EquipmentModels","EquipmentTypes","RequestStatuses","RequestPriorities","RequestTypes","Manifest","Global"])},302:function(t,e,n){"use strict";var r=n(28),i=n.n(r),s=n(301),o=n(18),l=n(0),u=n(99);function c(t){var e=u.a[l.a.home].title;return t?{title:e,routeName:o.a}:{title:e}}e.a={activated:function(){this.$nextTick(this.updateBreadcrumbs)},mounted:function(){this.$options.name&&s.a.includes(this.$options.name)||this.$nextTick(this.updateBreadcrumbs)},methods:{updateBreadcrumbs:function(){this.$options.breadcrumbs?this.$store.commit("template/SET_BREADCRUMBS",[c(!0)].concat(i()(this.$options.breadcrumbs))):this.$store.commit("template/SET_BREADCRUMBS",[c(!1)])}}}},304:function(t,e,n){"use strict";e.a={activated:function(){this.updateScrollTablePosition()},beforeRouteLeave:function(t,e,n){this.saveScrollTablePosition(),n()},methods:{updateScrollTablePosition:function(){var t=this.$store.state.template.pagesScroll[this.$route.name];t&&setTimeout(function(){document.documentElement.scrollTop=t})},saveScrollTablePosition:function(){var t=0,e=document.documentElement.scrollTop||document.body.scrollTop;e&&(t=e),this.$store.commit("template/SET_PAGE_SCROLL",{pageName:this.$route.name,scroll:t})}}}},416:function(t,e,n){"use strict";n.r(e);var r=n(52),i=n.n(r),s=n(3),o=n.n(s),l=n(304),u=n(9),c=n(302),a=n(103),f=n(0),m=n(74);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var p={name:"Requests",breadcrumbs:[{title:n(99).a[f.a.requests].title}],components:{RequestPrioritySelect:function(){return n.e(38).then(n.bind(null,447))},RequestStatusSelect:function(){return n.e(39).then(n.bind(null,448))},FilterTableButtons:function(){return n.e(17).then(n.bind(null,449))},RequestTypeSelect:function(){return n.e(40).then(n.bind(null,450))},FilterPagination:function(){return n.e(15).then(n.bind(null,451))},TableCellColor:function(){return n.e(19).then(n.bind(null,452))},FilterColumns:function(){return n.e(12).then(n.bind(null,453))},FilterAction:function(){return n.e(11).then(n.bind(null,454))},FilterSearch:function(){return n.e(16).then(n.bind(null,455))},TemplateList:function(){return n.e(9).then(n.bind(null,521))},FilterBasic:function(){return n.e(5).then(n.bind(null,457))},FilterFixed:function(){return n.e(14).then(n.bind(null,458))},FilterCore:function(){return n.e(13).then(n.bind(null,459))},TableComponent:function(){return n.e(8).then(n.bind(null,460))}},mixins:[l.a,c.a],data:function(){return{sections:f.a,sectionName:f.a.requests,filters:{priority_id:null,status_id:null,type_id:null},columns:[],fixed:null,search:"",sort:{}}},computed:h({},Object(m.b)({requestColumns:"requests/columns"}),{list:function(){return this.$store.state.requests.list},requests:function(){return this.list.data||[]},filterColumns:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,s=this.columns[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;o.model&&t.push(h({},o,{fixed:this.fixed===o.prop}))}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}return t},loading:function(){return this.$store.state.requests.loading},activeColumnProps:function(){return this.filterColumns.filter(function(t){return!t.disableSearch}).map(function(t){return t.prop})}}),watch:{requestColumns:{handler:function(t){this.columns=t.filter(function(t){return!t.hideList})},immediate:!0},filters:{handler:function(){this.fetchList()},deep:!0}},mounted:function(){this.fetchList()},methods:{fetchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={page:t,sortColumn:this.sort.column,sortOrder:this.sort.order,columns:this.activeColumnProps,search:this.search||null};Object.entries(this.filters).forEach(function(t){var n=i()(t,2),r=n[0],s=n[1];s&&(e[r]=s)}),this.$store.dispatch("requests/fetchList",e)},onChangeColumn:function(){u.a.columnRequests=this.filterColumns.map(function(t){return t.prop})},onRowClick:function(t){a.a.sidebar().add(t),this.$router.push({name:"".concat(f.a.requests,"-id"),params:{id:t.id}})},onSortChange:function(t){var e=t.prop,n=t.order;this.sort={column:e,order:n},this.fetchList()}}},b=n(98),v=Object(b.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("template-list",[n("template",{slot:"left-column"},[n("table-component",{attrs:{slot:"left-column",columns:t.filterColumns,list:t.list,loading:t.loading},on:{fetch:t.fetchList,"row-click":t.onRowClick,"sort-change":t.onSortChange},slot:"left-column",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.column,i=e.row,s=e.data;return["priority_name"===r.prop?[n("table-cell-color",{attrs:{value:s,color:i.priority_color}})]:"status_name"===r.prop?[n("table-cell-color",{attrs:{value:s,color:i.status_color}})]:t._e()]}}])})],1),t._v(" "),n("filter-core",{attrs:{slot:"right-column"},slot:"right-column"},[n("filter-table-buttons",{ref:"buttons",attrs:{section:t.sections.requests},on:{update:function(){return t.fetchList(+t.list.current_page||1)}}}),t._v(" "),n("filter-action",{attrs:{section:t.sectionName}}),t._v(" "),n("filter-basic",{attrs:{title:"Фільтри"}},[n("request-priority-select",{staticClass:"mb-10",attrs:{placeholder:"Пріорітет",size:"small",clearable:""},model:{value:t.filters.priority_id,callback:function(e){t.$set(t.filters,"priority_id",e)},expression:"filters.priority_id"}}),t._v(" "),n("request-status-select",{staticClass:"mb-10",attrs:{placeholder:"Статус",size:"small",clearable:""},model:{value:t.filters.status_id,callback:function(e){t.$set(t.filters,"status_id",e)},expression:"filters.status_id"}}),t._v(" "),n("request-type-select",{attrs:{placeholder:"Тип",size:"small",clearable:""},model:{value:t.filters.type_id,callback:function(e){t.$set(t.filters,"type_id",e)},expression:"filters.type_id"}})],1),t._v(" "),n("filter-search",{on:{submit:t.fetchList},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("filter-pagination",{attrs:{pagination:t.list}}),t._v(" "),n("filter-columns",{attrs:{columns:t.columns},on:{change:t.onChangeColumn}}),t._v(" "),n("filter-fixed",{attrs:{columns:t.columns},model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}})],1)],2)},[],!1,null,null,null);e.default=v.exports}}]);